# 高性能JavaScript - 需要记住的东西

## 数据存取

### 尽量使用字面量和局部变量

对字面量和局部变量的访问速度要远快于数组元素和对象成员，应该尽量使用字面量和局部变量。数组元素是通过数字进行索引来访问元素，对象成员则是通过字符串进行索引来访问其成员，这也是为什么访问数组元素会比访问对象成员要快那么一点的原因。
如果有某个跨作用域的值在函数中被引用了较多次数，那么将它存储到局部变量是一个可以提升性能的做法。这是因为局部变量总是存在与作用域链的起始位置，全局变量存在于作用域链的最末端。变量在作用域链中位置越深，访问所耗费的时间就越长。

### 改变作用域链

一般来说，一个执行环境的作用域链是不会改变的。但是有两个语句可以在执行时临时改变作用域链。第一个是with语句，不推荐使用。第二个是try-catch语句中的catch子句，同样应当避免使用。

### 闭包会影响到内存消耗和执行速度

一般情况下，函数运行完成后其上下文环境(context)就会被销毁，但是在函数内部使用了闭包的情况下，其上下文环境是不能被销毁的，这样就需要更多的内存开销。因此使用闭包会有更多的内存开销，应当尽量避免使用闭包。

### 原型链和嵌套对象

嵌套对象和原型链同理。位置越深访问越慢。访问window.some.obj.name的速度总是比访问window.some.obj要慢。访问obj.prototype.name总是比访问obj.name要慢。